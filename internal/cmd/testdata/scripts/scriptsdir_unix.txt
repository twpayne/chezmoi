[windows] skip 'UNIX only'

# test that chezmoi apply runs scripts in .chezmoiscripts
chezmoi apply
cmp stdout golden/apply

chhome home2/user

# test that chezmoi apply fails if .chezmoiscripts contains a non-script
! chezmoi apply
stderr 'not a script'

chhome home3/user

# test that chezmoi apply fails if .chezmoiscripts contains duplicate targets
! chezmoi apply
stderr 'inconsistent state'

chhome home4/user

# test that chezmoi apply fails if .chezmoiscripts contains any .chezmoi* files
! chezmoi apply
stderr 'not allowed in \.chezmoiscripts directory'

-- golden/apply --
script
script in subdir
-- home/user/.local/share/chezmoi/.chezmoiscripts/.ignore --
-- home/user/.local/share/chezmoi/.chezmoiscripts/run_script --
#!/bin/sh

echo script
-- home/user/.local/share/chezmoi/.chezmoiscripts/subdir/run_script --
#!/bin/sh

echo script in subdir
-- home2/user/.local/share/chezmoi/.chezmoiscripts/dot_file --
-- home3/user/.local/share/chezmoi/.chezmoiscripts/run_script --
-- home3/user/.local/share/chezmoi/.chezmoiscripts/run_once_script --
-- home4/user/.local/share/chezmoi/.chezmoiscripts/.chezmoiignore --
