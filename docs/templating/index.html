<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta name="generator" content="Hugo 0.82.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Templating Guide #  Introduction #  Templates are used to change the contents of a file depending on the environment. For example, you can use the hostname of the machine to create different configurations on different machines.
chezmoi uses the text/template syntax from Go extended with text template functions from sprig.
When reading files from the source state, chezmoi interprets them as a template if either of the following is true:">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Templating" />
<meta property="og:description" content="Templating Guide #  Introduction #  Templates are used to change the contents of a file depending on the environment. For example, you can use the hostname of the machine to create different configurations on different machines.
chezmoi uses the text/template syntax from Go extended with text template functions from sprig.
When reading files from the source state, chezmoi interprets them as a template if either of the following is true:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chezmoi.io/docs/templating/" /><meta property="article:section" content="docs" />



<title>Templating | chezmoi.io</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.2bc2364a4a4b31f0ec1debecf0a8f90a840821f143dfe1ac6a0f7cbcbdcf64ac.css" integrity="sha256-K8I2SkpLMfDsHevs8Kj5CoQIIfFD3&#43;Gsag98vL3PZKw=">
<script defer src="/en.search.min.f9660175ba4c622a6fba8f22aeaf2aa5f453f8bd948b23f73866d285ca3a809b.js" integrity="sha256-&#43;WYBdbpMYipvuo8irq8qpfRT&#43;L2UiyP3OGbShco6gJs="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/logo-144px.svg" alt="Logo" /><span>chezmoi.io</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li><a href="/docs/install/">Install</a></li>
<li><a href="/docs/quick-start/">Quick Start</a></li>
<li><a href="/docs/how-to/">How-To</a></li>
<li><a href="/docs/templating/"class=active>Templating</a></li>
<li><a href="/docs/faq/">FAQ</a></li>
<li><a href="/docs/changes/">Changes</a></li>
<li><a href="/docs/reference/">Reference</a></li>
<li><a href="/docs/media/">Media</a></li>
<li><a href="/docs/comparison/">Comparison</a></li>
<li><a href="/docs/contributing/">Contributing</a></li>
<li><a href="https://github.com/twpayne/chezmoi">GitHub</a></li>
</ul>










</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Templating</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#template-data">Template data</a></li>
    <li><a href="#creating-a-template-file">Creating a template file</a></li>
    <li><a href="#editing-a-template-file">Editing a template file</a></li>
    <li><a href="#testing-templates">Testing templates</a></li>
    <li><a href="#template-syntax">Template syntax</a>
      <ul>
        <li><a href="#removing-whitespace">Removing whitespace</a></li>
      </ul>
    </li>
    <li><a href="#debugging-templates">Debugging templates</a></li>
    <li><a href="#simple-logic">Simple logic</a>
      <ul>
        <li><a href="#boolean-functions">Boolean functions</a></li>
        <li><a href="#integer-functions">Integer functions</a></li>
      </ul>
    </li>
    <li><a href="#more-complicated-logic">More complicated logic</a>
      <ul>
        <li><a href="#chaining-operators">Chaining operators</a></li>
      </ul>
    </li>
    <li><a href="#helper-functions">Helper functions</a></li>
    <li><a href="#template-variables">Template variables</a></li>
    <li><a href="#using-chezmoitemplates-for-creating-similar-files">Using .chezmoitemplates for creating similar files</a>
      <ul>
        <li><a href="#passing-multiple-arguments">Passing multiple arguments</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="templating-guide">
  Templating Guide
  <a class="anchor" href="#templating-guide">#</a>
</h1>
<h2 id="introduction">
  Introduction
  <a class="anchor" href="#introduction">#</a>
</h2>
<p>Templates are used to change the contents of a file depending on the
environment. For example, you can use the hostname of the machine to create
different configurations on different machines.</p>
<p>chezmoi uses the <a href="https://pkg.go.dev/text/template"><code>text/template</code></a> syntax from
Go extended with <a href="http://masterminds.github.io/sprig/">text template functions from
<code>sprig</code></a>.</p>
<p>When reading files from the source state, chezmoi interprets them as a template
if either of the following is true:</p>
<ul>
<li>The file name has a <code>.tmpl</code> suffix.</li>
<li>The file is in the <code>.chezmoitemplates</code> directory, or a subdirectory of
<code>.chezmoitemplates</code>.</li>
</ul>
<h2 id="template-data">
  Template data
  <a class="anchor" href="#template-data">#</a>
</h2>
<p>chezmoi provides a variety of template variables. For a full list, run</p>
<pre><code>chezmoi data
</code></pre>
<p>These come from a variety of sources:</p>
<ul>
<li>Variables populated by chezmoi are in <code>.chezmoi</code>, for example <code>.chezmoi.os</code>.</li>
<li>Variables created by you in the <code>data</code> section of the configuration file.</li>
</ul>
<p>Furthermore, chezmoi provides a variety of functions to retrieve data at runtime
from password managers, environment variables, and the filesystem.</p>
<h2 id="creating-a-template-file">
  Creating a template file
  <a class="anchor" href="#creating-a-template-file">#</a>
</h2>
<p>There are several ways to create a template:</p>
<ul>
<li>
<p>When adding a file for the first time, pass the <code>--template</code> argument, for example:</p>
<pre><code>chezmoi add --template ~/.zshrc
</code></pre>
</li>
<li>
<p>When adding a file for the first time, you can pass the <code>--autotemplate</code>
argument, which tells chezmoi to make the file as a template and automatically
replace variables that chezmoi knows about, for example:</p>
<pre><code>chezmoi add --autotemplate ~/.zshrc
</code></pre>
</li>
<li>
<p>If a file is already managed by chezmoi, but is not a template, you can make
it a template by running, for example:</p>
<pre><code>chezmoi chattr +template ~/.zshrc
</code></pre>
</li>
<li>
<p>You can create a template manually in the source directory by giving it a
<code>.tmpl</code> extension, for example:</p>
<pre><code>chezmoi cd
$EDITOR dot_zshrc.tmpl
</code></pre>
</li>
<li>
<p>Templates in <code>.chezmoitemplates</code> must be created manually, for example:</p>
<pre><code>chezmoi cd
mkdir -p .chezmoitemplates
cd .chezmoitemplates
$EDITOR mytemplate
</code></pre>
</li>
</ul>
<h2 id="editing-a-template-file">
  Editing a template file
  <a class="anchor" href="#editing-a-template-file">#</a>
</h2>
<p>The easiest way to edit a template is to use <code>chezmoi edit</code>, for example:</p>
<pre><code>chezmoi edit ~/.zshrc
</code></pre>
<p>This will open the source file for <code>~/.zshrc</code> in <code>$EDITOR</code>. When you quit the
editor, chezmoi will check the template syntax.</p>
<p>If you want the changes you make to be immediately applied after you quit the
editor, use the <code>--apply</code> option, for example:</p>
<pre><code>chezmoi edit --apply ~/.zshrc
</code></pre>
<h2 id="testing-templates">
  Testing templates
  <a class="anchor" href="#testing-templates">#</a>
</h2>
<p>Templates can be tested with the <code>chezmoi execute-template</code> command which treats
each of its arguments as a template and executes it. This can be useful for
testing small fragments of templates, for example:</p>
<pre><code>chezmoi execute-template '{{ .chezmoi.hostname }}'
</code></pre>
<p>If there are no arguments, <code>chezmoi execute-template</code> will read the template
from the standard input. This can be useful for testing whole files, for example:</p>
<pre><code>chezmoi cd
chezmoi execute-template &lt; dot_zshrc.tmpl
</code></pre>
<h2 id="template-syntax">
  Template syntax
  <a class="anchor" href="#template-syntax">#</a>
</h2>
<p>Template actions are written inside double curly brackets, <code>{{</code> and <code>}}</code>.
Actions can be variables, pipelines, or control statements. Text outside actions
is copied literally.</p>
<p>Variables are written literally, for example:</p>
<pre><code>{{ .chezmoi.hostname }}
</code></pre>
<p>Conditional expressions can be written using <code>if</code>, <code>else if</code>, <code>else</code>, and <code>end</code>,
for example:</p>
<pre><code>{{ if (eq .chezmoi.os &quot;darwin&quot;) }}
# darwin
{{ else if (eq .chezmoi.os &quot;linux&quot; ) }}
# linux
{{ else }}
# other operating system
{{ end }}
</code></pre>
<p>For a full description of the template syntax, see the <a href="https://pkg.go.dev/text/template"><code>text/template</code>
documentation</a>.</p>
<h3 id="removing-whitespace">
  Removing whitespace
  <a class="anchor" href="#removing-whitespace">#</a>
</h3>
<p>For formatting reasons you might want to leave some whitespace after or before
the template code. This whitespace will remain in the final file, which you
might not want.</p>
<p>A solution for this is to place a minus sign and a space next to the brackets.
So <code>{{- </code> for the left brackets and <code> -}}</code> for the right brackets. Here&rsquo;s an
example:</p>
<pre><code>HOSTNAME= {{- .chezmoi.hostname }}
</code></pre>
<p>This will result in</p>
<pre><code>HOSTNAME=myhostname
</code></pre>
<p>Notice that this will remove any number of tabs, spaces and even newlines and
carriage returns.</p>
<h2 id="debugging-templates">
  Debugging templates
  <a class="anchor" href="#debugging-templates">#</a>
</h2>
<p>If there is a mistake in one of your templates and you want to debug it, chezmoi
can help you. You can use this subcommand to test and play with the examples in
these docs as well.</p>
<p>There is a very handy subcommand called <code>execute-template</code>. chezmoi will
interpret any data coming from stdin or at the end of the command. It will then
interpret all templates and output the result to stdout. For example with the
command:</p>
<pre><code>chezmoi execute-template '{{ .chezmoi.os }}/{{ .chezmoi.arch }}'
</code></pre>
<p>chezmoi will output the current OS and architecture to stdout.</p>
<p>You can also feed the contents of a file to this command by typing:</p>
<pre><code>cat foo.txt | chezmoi execute-template
</code></pre>
<h2 id="simple-logic">
  Simple logic
  <a class="anchor" href="#simple-logic">#</a>
</h2>
<p>A very useful feature of chezmoi templates is the ability to perform logical
operations.</p>
<pre><code># common config
export EDITOR=vi

# machine-specific configuration
{{- if eq .chezmoi.hostname &quot;work-laptop&quot; }}
# this will only be included in ~/.bashrc on work-laptop
{{- end }}
</code></pre>
<p>In this example chezmoi will look at the hostname of the machine and if that is
equal to &ldquo;work-laptop&rdquo;, the text between the <code>if</code> and the <code>end</code> will be included
in the result.</p>
<h3 id="boolean-functions">
  Boolean functions
  <a class="anchor" href="#boolean-functions">#</a>
</h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>eq</code></td>
<td>Returns true if the first argument is equal to any of the other arguments.</td>
</tr>
<tr>
<td><code>not</code></td>
<td>Returns the boolean negation of its single argument.</td>
</tr>
<tr>
<td><code>and</code></td>
<td>Returns the boolean AND of its arguments by returning the first empty argument or the last argument, that is, <code>and x y</code> behaves as <code>if x then y else x</code>. All the arguments are evaluated.</td>
</tr>
<tr>
<td><code>or</code></td>
<td>Returns the boolean OR of its arguments by returning the first non-empty argument or the last argument, that is, <code>or x y</code> behaves as <code>if x then x else y</code> All the arguments are evaluated.</td>
</tr>
</tbody>
</table>
<h3 id="integer-functions">
  Integer functions
  <a class="anchor" href="#integer-functions">#</a>
</h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Return value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>len</code></td>
<td>Returns the integer length of its argument.</td>
</tr>
<tr>
<td><code>eq</code></td>
<td>Returns the boolean truth of arg1 == arg2.</td>
</tr>
<tr>
<td><code>ne</code></td>
<td>Returns the boolean truth of arg1 != arg2.</td>
</tr>
<tr>
<td><code>lt</code></td>
<td>Returns the boolean truth of arg1 &lt; arg2.</td>
</tr>
<tr>
<td><code>le</code></td>
<td>Returns the boolean truth of arg1 &lt;= arg2.</td>
</tr>
<tr>
<td><code>gt</code></td>
<td>Returns the boolean truth of arg1 &gt; arg2.</td>
</tr>
<tr>
<td><code>ge</code></td>
<td>Returns the boolean truth of arg1 &gt;= arg2.</td>
</tr>
</tbody>
</table>
<h2 id="more-complicated-logic">
  More complicated logic
  <a class="anchor" href="#more-complicated-logic">#</a>
</h2>
<p>Up until now, we have only seen if statements that can handle at most two
variables. In this part we will see how to create more complicated expressions.</p>
<p>You can also create more complicated expressions. The <code>eq</code> command can accept
multiple arguments. It will check if the first argument is equal to any of the
other arguments.</p>
<pre><code>{{ if eq &quot;foo&quot; &quot;foo&quot; &quot;bar&quot; }}one{{end}}
{{ if eq &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; }}hello{{end}}
{{ if eq &quot;foo&quot; &quot;bar&quot; &quot;bar&quot; }}hello{{end}}
</code></pre>
<p>The first two examples will output <code>hello</code> and the last example will output
nothing.</p>
<p>The operators <code>or</code> and <code>and</code> can also accept multiple arguments.</p>
<h3 id="chaining-operators">
  Chaining operators
  <a class="anchor" href="#chaining-operators">#</a>
</h3>
<p>You can perform multiple checks in one if statement.</p>
<pre><code>{{ if (and (eq .chezmoi.os &quot;linux&quot;) (ne .email &quot;john@home.org&quot;)) }}
...
{{ end }}
</code></pre>
<p>This will check if the operating system is Linux and the configured email is not
the home email. The brackets are needed here, because otherwise all the
arguments will be give to the <code>and</code> command.</p>
<p>This way you can chain as many operators together as you like.</p>
<h2 id="helper-functions">
  Helper functions
  <a class="anchor" href="#helper-functions">#</a>
</h2>
<p>chezmoi has added multiple helper functions to the
<a href="https://pkg.go.dev/text/template"><code>text/template</code></a> syntax.</p>
<p>chezmoi includes <a href="http://masterminds.github.io/sprig/"><code>sprig</code></a>, an extension to
the <code>text/template</code> format that contains many helper functions. Take a look at
their documentation for a list.</p>
<p>chezmoi adds a few functions of its own as well. Take a look at the
<a href="REFERENCE.md#template-functions"><code>reference</code></a> for complete list.</p>
<h2 id="template-variables">
  Template variables
  <a class="anchor" href="#template-variables">#</a>
</h2>
<p>chezmoi defines a few useful templates variables that depend on the system you
are currently on. A list of the variables defined by chezmoi can be found
<a href="REFERENCE.md#template-variables">here</a>.</p>
<p>There are, however more variables than that. To view the variables available on
your system, execute:</p>
<pre><code>chezmoi data
</code></pre>
<p>This outputs the variables in JSON format by default. To access the variable
<code>chezmoi.kernel.osrelease</code> in a template, use</p>
<pre><code>{{ .chezmoi.kernel.osrelease }}
</code></pre>
<p>This way you can also access the variables you defined yourself.</p>
<h2 id="using-chezmoitemplates-for-creating-similar-files">
  Using .chezmoitemplates for creating similar files
  <a class="anchor" href="#using-chezmoitemplates-for-creating-similar-files">#</a>
</h2>
<p>When you have multiple similar files, but they aren&rsquo;t quite the same, you can
create a template file in the directory <code>.chezmoitemplates</code>. This template can
be inserted in other template files, for example:</p>
<p>Create <code>.local/share/chezmoi/.chezmoitemplates/alacritty</code>:</p>
<pre><code>some: config
fontsize: {{ . }}
somemore: config
</code></pre>
<p>Notice the file name doesn&rsquo;t have to end in <code>.tmpl</code>, as all files in the
directory <code>.chemzoitemplates</code> are interpreted as templates.</p>
<p>Create other files using the template <code>.local/share/chezmoi/small-font.yml.tmpl</code></p>
<pre><code>{{- template &quot;alacritty&quot; 12 -}}
</code></pre>
<p><code>.local/share/chezmoi/big-font.yml.tmpl</code></p>
<pre><code>{{- template &quot;alacritty&quot; 18 -}}
</code></pre>
<p>Here we&rsquo;re calling the shared <code>alacritty</code> template with the font size as the
<code>.</code> value passed in. You can test this with <code>chezmoi cat</code>:</p>
<pre><code>$ chezmoi cat ~/small-font.yml
some: config
fontsize: 12
somemore: config
$ chezmoi cat ~/big-font.yml
some: config
fontsize: 18
somemore: config
</code></pre>
<h3 id="passing-multiple-arguments">
  Passing multiple arguments
  <a class="anchor" href="#passing-multiple-arguments">#</a>
</h3>
<p>In the example above only one arguments is passed to the template. To pass more
arguments to the template, you can do it in two ways.</p>
<h4 id="via-the-config-file">
  Via the config file
  <a class="anchor" href="#via-the-config-file">#</a>
</h4>
<p>This method is useful if you want to use the same template arguments multiple
times, because you don&rsquo;t specify the arguments every time. Instead you specify
them in the file <code>.config/chezmoi/.chezmoi.toml</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">alacritty</span>.<span style="color:#a6e22e">big</span>]
    <span style="color:#a6e22e">fontsize</span> = <span style="color:#ae81ff">18</span>
    <span style="color:#a6e22e">font</span> = <span style="color:#e6db74">&#34;DejaVu Serif&#34;</span>
[<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">alacritty</span>.<span style="color:#a6e22e">small</span>]
    <span style="color:#a6e22e">fontsize</span> = <span style="color:#ae81ff">12</span>
    <span style="color:#a6e22e">font</span> = <span style="color:#e6db74">&#34;DejaVu Sans Mono&#34;</span>
</code></pre></div><p>Use the variables in <code>.local/share/chezmoi/.chezmoitemplates/alacritty</code>:</p>
<pre><code>some: config
fontsize: {{ .fontsize }}
font: {{ .font }}
somemore: config
</code></pre>
<p>And connect them with <code>.local/share/chezmoi/small-font.yml.tmpl</code>:</p>
<pre><code>{{- template &quot;alacritty&quot; .alacritty.small -}}
</code></pre>
<p>At the moment, this means that you&rsquo;ll have to duplicate the alacritty data in
the config file on every machine, but a feature will be added to avoid this.</p>
<h4 id="by-passing-a-dictionary">
  By passing a dictionary
  <a class="anchor" href="#by-passing-a-dictionary">#</a>
</h4>
<p>Using the same alacritty configuration as above, you can pass the arguments to
it with a dictionary, for example <code>.local/share/chezmoi/small-font.yml.tmpl</code>:</p>
<pre><code>{{- template &quot;alacritty&quot; dict &quot;fontsize&quot; 12 &quot;font&quot; &quot;DejaVu Sans Mono&quot; -}}
</code></pre>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#template-data">Template data</a></li>
    <li><a href="#creating-a-template-file">Creating a template file</a></li>
    <li><a href="#editing-a-template-file">Editing a template file</a></li>
    <li><a href="#testing-templates">Testing templates</a></li>
    <li><a href="#template-syntax">Template syntax</a>
      <ul>
        <li><a href="#removing-whitespace">Removing whitespace</a></li>
      </ul>
    </li>
    <li><a href="#debugging-templates">Debugging templates</a></li>
    <li><a href="#simple-logic">Simple logic</a>
      <ul>
        <li><a href="#boolean-functions">Boolean functions</a></li>
        <li><a href="#integer-functions">Integer functions</a></li>
      </ul>
    </li>
    <li><a href="#more-complicated-logic">More complicated logic</a>
      <ul>
        <li><a href="#chaining-operators">Chaining operators</a></li>
      </ul>
    </li>
    <li><a href="#helper-functions">Helper functions</a></li>
    <li><a href="#template-variables">Template variables</a></li>
    <li><a href="#using-chezmoitemplates-for-creating-similar-files">Using .chezmoitemplates for creating similar files</a>
      <ul>
        <li><a href="#passing-multiple-arguments">Passing multiple arguments</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












